{#
	This is the base template for pages seen by a logged-in user, and provides
	the top-level navigation menu.

	Page templates based on this one should specify:
		- A "title" block containing the page title (e.g. "User Profile")
		- A "content" block containing the main HTML/Jinja content of the page.
	
	Each page should also set the "active_page" variable to control which top-
	level menu item is highlighted as active (e.g. a homepage template based on
	this one should include the line):
		{% set active_page = 'home' %}
	
	Currently, the only available options are 'home' and 'profile'. You could
	choose to continue with this same approach as you add other menu options,
	using these two as an example, or find your own way to control which menu
	item is shown as "active".
#}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}{% endblock %} - Internship Platform</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">  </head>
  </head>
  <body class="bg-light">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous"></script>    

    <div class="container-fluid">
      <div class="row flex-nowrap">

		<div class="col-auto col-md-3 col-xl-2 px-sm-2 px-0 bg-success text-white min-vh-100">
          <div class="d-flex flex-column align-items-center align-items-sm-start px-3 pt-3">

            <a href="/" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-white text-decoration-none">
              <span class="fs-4 fw-bold">InternLink</span>
            </a>
            <hr class="text-white w-100">

            <!-- Profile Image -->
            <div class="my-3 text-center w-100">
            <img src="{{ url_for('static', filename=profile_image or 'default_profile.png') }}"
                class="rounded-circle img-thumbnail bg-light"
                alt="Profile Image"
                style="width: 100px; height: 100px; object-fit: cover;">
            </div>

            <hr class="text-white w-100">

            <!-- Nav -->
            <ul class="nav nav-pills flex-column mb-sm-auto mb-0 align-items-center align-items-sm-start w-100" id="menu">
              <li class="nav-item w-100">
                <a href="{% if session['role'] == 'student' %}{{ url_for('student_home') }}
                          {% elif session['role'] == 'employer' %}{{ url_for('employer_home') }}
                          {% elif session['role'] == 'admin' %}{{ url_for('admin_home') }}{% endif %}"
                   class="nav-link text-white px-0 {{ 'active fw-bold bg-light text-success rounded' if active_page=='home' else '' }}">
                  <i class="bi bi-house"></i> <span class="ms-2">Home</span>
                </a>
              </li>
              
            </ul>
            <hr class="text-white w-100">

            <!-- Logout -->
            <div class="pb-3 w-100">
              <a href="{{ url_for('logout') }}" class="btn btn-outline-light w-100 fw-bold">Log Out</a>
            </div>
          </div>
        </div>

        <div class="col py-3">
          <!-- Flash Messages Block -->
          {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
              <div class="container mb-3">
                {% for category, message in messages %}
                  <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
                    {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                  </div>
                {% endfor %}
              </div>
            {% endif %}
          {% endwith %}
          
          {% block content %}{% endblock %}
        </div>
      </div>
    </div>
  </body>
</html>

