{% extends 'userbase.html' %}
{% block title %}User Profile{% endblock %}
{% set active_page = 'users' %}
{% block content %}
<section class="container my-5">
    <div class="card mx-auto" style="max-width: 540px;">
        <div class="row g-0">
            <div class="col-md-4 text-center d-flex align-items-center justify-content-center">
                <img src="{{ url_for('static', filename=user_profile.profile_image) if user_profile.profile_image else url_for('static', filename='default_profile.png') }}"
                     alt="Profile Image"
                     class="rounded-circle img-thumbnail m-3"
                     style="width: 120px; height: 120px; object-fit: cover;">
            </div>
            <div class="col-md-8">
                <div class="card-body">
                    <h4 class="card-title mb-2">{{ user_profile.full_name or "No Name" }}</h4>
                    <p class="card-text mb-1"><strong>Username:</strong> {{ user_profile.username }}</p>
                    <p class="card-text mb-1"><strong>Email:</strong> {{ user_profile.email }}</p>
                    <p class="card-text mb-1"><strong>Role:</strong> {{ user_profile.role|capitalize }}</p>
                    <p class="card-text mb-1"><strong>Status:</strong> 
                        <span class="badge {% if user_profile.status == 'active' %}bg-success{% else %}bg-secondary{% endif %}">
                            {{ user_profile.status|capitalize }}
                        </span>
                    </p>

                    {% if user_profile.role == 'student' and student_info %}
                        <hr>
                        <p class="card-text mb-1"><strong>University:</strong> {{ student_info.university or "N/A" }}</p>
                        <p class="card-text mb-1"><strong>Course:</strong> {{ student_info.course or "N/A" }}</p>
                        {% if student_info.resume_path %}
                        <p class="card-text mb-1">
                            <strong>Resume:</strong>
                            <a href="{{ url_for('static', filename=student_info.resume_path) }}" target="_blank">View Resume</a>
                        </p>
                        {% endif %}
                    {% elif user_profile.role == 'employer' and employer_info %}
                        <hr>
                        <p class="card-text mb-1"><strong>Company:</strong> {{ employer_info.company_name or "N/A" }}</p>
                        <p class="card-text mb-1"><strong>Description:</strong> {{ employer_info.company_description or "N/A" }}</p>
                        <p class="card-text mb-1"><strong>Website:</strong>
                            {% if employer_info.website %}
                                <a href="{{ employer_info.website }}" target="_blank">{{ employer_info.website }}</a>
                            {% else %}N/A{% endif %}
                        </p>
                        {% if employer_info.logo_path %}
                        <p class="card-text mt-2">
                            <img src="{{ url_for('static', filename=employer_info.logo_path) }}"
                                 alt="Company Logo"
                                 class="img-thumbnail"
                                 style="height: 70px;">
                        </p>
                        {% endif %}
                    {% endif %}

                </div>
            </div>
        </div>
    </div>
    <div class="text-center mt-4">
        <a href="{{ url_for('user_management') }}" class="btn btn-outline-secondary">Back to User List</a>
    </div>
</section>
{% endblock %}